Version 4
SHEET 1 2108 1128
WIRE -144 -64 -160 -64
WIRE -32 -64 -64 -64
WIRE 432 -64 -32 -64
WIRE 528 -64 432 -64
WIRE 656 -64 528 -64
WIRE 848 -64 656 -64
WIRE 1024 -64 848 -64
WIRE 1152 -64 1024 -64
WIRE 1216 -64 1152 -64
WIRE 1392 -64 1264 -64
WIRE 1552 -64 1472 -64
WIRE 1024 -48 1024 -64
WIRE 848 -16 848 -64
WIRE 1152 0 1152 -64
WIRE 432 16 432 -64
WIRE 1264 32 1264 -64
WIRE 1024 48 1024 32
WIRE 1216 48 1216 -64
WIRE 848 128 848 48
WIRE 1024 128 848 128
WIRE 1152 128 1152 64
WIRE 1152 128 1024 128
WIRE 1216 128 1216 96
WIRE 1216 128 1152 128
WIRE 656 160 656 -64
WIRE 1264 208 1264 112
WIRE 848 224 848 128
WIRE 528 272 528 -64
WIRE 288 288 288 208
WIRE 432 288 432 96
WIRE 432 288 288 288
WIRE 496 288 432 288
WIRE 656 304 656 240
WIRE 656 304 560 304
WIRE 688 304 656 304
WIRE 800 304 768 304
WIRE 96 320 80 320
WIRE 288 320 176 320
WIRE 336 320 288 320
WIRE 432 320 416 320
WIRE 496 320 432 320
WIRE 432 336 432 320
WIRE 560 336 560 320
WIRE 560 336 528 336
WIRE 1264 336 1264 288
WIRE 528 352 528 336
WIRE 848 352 848 320
WIRE 288 400 288 320
WIRE 656 400 656 304
WIRE 288 480 288 464
WIRE 400 480 288 480
WIRE 512 480 400 480
WIRE 656 480 656 464
WIRE 656 480 512 480
WIRE 512 496 512 480
WIRE 480 624 448 624
WIRE 352 640 352 624
WIRE 352 640 304 640
WIRE 352 656 352 640
WIRE -32 704 -32 -64
WIRE 224 704 224 640
WIRE 224 704 -32 704
WIRE 336 704 224 704
WIRE 560 704 432 704
FLAG -160 -64 0
FLAG 80 320 0
FLAG 1552 -64 0
FLAG 528 352 0
FLAG 432 400 0
FLAG 848 352 0
FLAG 1264 336 0
FLAG 288 144 0
FLAG 640 704 0
FLAG 512 560 0
FLAG 480 624 0
SYMBOL sw 1264 128 M180
WINDOW 3 24 96 Invisible 2
WINDOW 0 61 81 Left 2
SYMATTR Value canRelay
SYMATTR InstName canRelay
SYMBOL res 1008 32 R0
WINDOW 0 -75 23 Left 2
WINDOW 3 -56 64 Left 2
SYMATTR InstName Rrelay
SYMATTR Value 140
SYMBOL voltage 192 320 M270
WINDOW 0 72 50 VRight 2
WINDOW 3 46 -48 VRight 1
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName RPI_canOn
SYMATTR Value PULSE(0 3.3 1 0.01 0.01 5 20)
SYMBOL diode 1168 64 R180
WINDOW 0 39 55 Left 2
WINDOW 3 42 17 Left 2
SYMATTR InstName Drelay
SYMATTR Value 1N4148
SYMBOL ind 1008 -64 R0
WINDOW 0 -74 40 Left 2
WINDOW 3 -56 68 Left 2
SYMATTR InstName Lrelay
SYMATTR Value 10m
SYMBOL res 1488 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName CANbusLoad
SYMATTR Value 10k
SYMBOL voltage 1264 192 R0
WINDOW 0 68 30 Bottom 2
WINDOW 3 44 74 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName CANbus
SYMATTR Value 5V
SYMBOL res 544 720 R270
WINDOW 0 -53 63 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName canController
SYMATTR Value 500
SYMBOL voltage -48 -64 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 50 3 VRight 2
WINDOW 3 78 88 VRight 2
SYMATTR InstName RPI_VCC5
SYMATTR Value 5V
SYMBOL LM311 528 240 R0
WINDOW 0 16 16 Left 2
WINDOW 3 17 37 Left 2
SYMATTR InstName U1
SYMATTR Value LM311
SYMBOL cap 416 336 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 432 304 R90
WINDOW 0 80 52 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 68k
SYMBOL res 416 0 R0
SYMATTR InstName R6
SYMATTR Value 500k
SYMBOL zener 272 144 R0
WINDOW 0 -45 32 Left 2
WINDOW 3 65 75 VLeft 2
SYMATTR InstName D1
SYMATTR Value PH_BZX84C3V3
SYMBOL nmos 800 224 R0
SYMATTR InstName M3
SYMATTR Value BSC016N03MS
SYMBOL res 640 144 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL cap 832 -16 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL diode 272 400 R0
WINDOW 0 43 17 Left 2
WINDOW 3 46 41 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 640 400 R0
WINDOW 0 -42 17 Left 2
WINDOW 3 -95 44 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL cap 496 496 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 784 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 384 464 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL pmos 432 656 R90
WINDOW 0 102 84 VRight 2
WINDOW 3 74 33 VRight 2
SYMATTR InstName M2
SYMATTR Value AONR21305C
SYMBOL npn 352 560 M90
WINDOW 0 24 -4 VLeft 2
WINDOW 3 -3 12 VLeft 2
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res 320 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
TEXT 1320 72 Left 2 !.model canRelay SW(Ron=0.150 Roff=10Meg Vt=4.375 Vh=-0.625)
TEXT -224 -144 Left 2 !.tran 20
TEXT -104 -144 Left 2 !.include LM311.301
